{% extends "template.html.twig" %}

{% block stylesheets %}
    {{ encore_entry_link_tags('editor') }}
{% endblock %}

{% block javascripts %}
    {{ encore_entry_script_tags('editor') }}
{% endblock %}

{% block content %}
<main role="main" class="container">
    <div class="editor editor__container">
        <nav class="editor-nav">
            <ul class="pagination justify-content-center">
                <li class="page-item disabled">
                    <a class="page-link" href="#">
                        {% trans %}editor.pagination.previous{% endtrans %}
                    </a>
                </li>

                <li class="page-item page-chapter page-chapter_dropdown dropdown">
                    <a class="page-link dropdown-toggle"
                       href="#"
                       role="button"
                       id="dropdownMenuLink"
                       data-toggle="dropdown"
                       aria-haspopup="true"
                       aria-expanded="false"
                    >
                        Chapter 1
                    </a>

                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                        <a class="dropdown-item" href="#">Chapter 2</a>
                        <a class="dropdown-item" href="#">Chapter 3</a>
                        <a class="dropdown-item" href="#">Chapter 4</a>
                    </div>
                </li>

                <li class="page-item">
                    <a class="page-link" href="#">
                        {% trans %}editor.pagination.next{% endtrans %}
                    </a>
                </li>
            </ul>
        </nav>
        
        <div class="editor-columns">

            <!-- Text Visualization -->
            <div class="row">
                <div class="col-6 column-left">
                    <div class="content" data-role="origin">
                        {% for paragraphKey,paragraph in section.paragraphs %}
                        <p>
                            {% for sentenceKey,sentence in paragraph.sentences %}
                            <span class="js-sentence" data-sentence-id="{{ sentence.id }}">
                                {{ sentence.content }}
                            </span>
                            {% endfor %}
                        </p>
                        {% endfor %}
                    </div>
                </div>
                <div class="col-6 column-right">
                    <div class="content" data-role="translation">
                        {% for paragraphKey,paragraph in section.paragraphs %}
                        <p>
                            {% for sentenceKey,sentence in paragraph.sentences %}
                            <span class="js-sentence" data-sentence-id="{{ sentence.id }}">
                                {% if sentence.translation %}
                                    {{ sentence.translation }}
                                {% else %}
                                    {{ sentence.content }}
                                {% endif %}
                            </span>
                            {% endfor %}
                        </p>
                        {% endfor %}
                    </div>
                </div>
            </div>
            <!-- Text Visualization END -->

            <!-- Dashboard -->
            <div class="row">
                <div class="col-10 position-fixed translator-dashboard js-translator-dashboard">
                    <div class="row h-100">

                        <div class="col-6 h-100 translator-tools ">

                            <!-- Machine Translation -->
                            <div class="js-machine collapse show">
                                <div id="machine-translation" class="d-flex flex-wrap machine-translation mb-4">

                                    <div class="h-5 font-weight-bold mr-1 title">
                                        {% trans %}editor.working.machine{% endtrans %}
                                    </div>

                                    <div class="flex-grow-1 toolset">
                                        <span class="js-transfer">
                                            <svg viewBox="0 0 20 20" class="svg-reply">
                                                <use xlink:href="#reply-24px"></use>
                                            </svg>
                                        </span>
                                    </div>
                                    <div class="font-weight-light text-small js-subject">
                                        {% trans %}editor.working.machine_none{% endtrans %}
                                    </div>

                                </div>
                                <div id="translation-memory" class="d-flex flex-wrap translation-memory">

                                    <div class="h-5 font-weight-bold mr-1 title">
                                        {% trans %}editor.working.memory{% endtrans %}
                                    </div>

                                    <div class="flex-grow-1 toolset">
                                        <div class="btn-group btn-group-sm ml-auto mr-1"
                                             role="group"
                                             aria-label="{% trans %}editor.working.memory_stats{% endtrans %}"
                                        >
                                            <span class="badge badge-pill mr-0">1 of 4</span>
                                            <span class="badge badge-success">100%</span>
                                        </div>

                                        <div class="btn-group btn-group-extra-sm ml-auto mr-1"
                                             role="group"
                                             aria-label="{% trans %}editor.working.memory_nav{% endtrans %}"
                                        >
                                            <button type="button" class="btn btn-outline-secondary">&lt;&lt;</button>
                                            <button type="button" class="btn btn-outline-secondary">&gt;&gt;</button>
                                        </div>

                                        <span class="js-transfer">
                                            <svg viewBox="0 0 20 20" class="svg-reply">
                                                <use xlink:href="#reply-24px"></use>
                                            </svg>
                                        </span>
                                    </div>

                                    <div class="font-weight-light text-small js-subject">
                                        {% trans %}editor.working.memory_none{% endtrans %}
                                    </div>
                                </div>
                            </div>
                            <!-- Machine Translation END -->

                            <!-- Comments -->
                            <div class="js-comments-panel collapse">

                                <div class="h-5 font-weight-bold mr-1 title">
                                    {% trans %}editor.comments.title{% endtrans %}
                                </div>

                                <!-- Chat module -->
                                <div class="chat-module chat-comments">
                                    <div class="chat-module-top js-comments"
                                         data-loading="{% trans %}editor.comments.loading{% endtrans %}"
                                    >
                                    </div>

                                    <div class="chat-module-bottom">
                                        <form class="chat-form">
                                            <textarea id="comment"
                                                      class="form-control"
                                                      placeholder="Type message"
                                                      rows="1"
                                                      required
                                            >
                                            </textarea>
                                            <div class="chat-form-buttons">
                                            </div>
                                        </form>
                                    </div>
                                </div>
                                <!-- Chat module -->

                            </div>
                            <!-- Comment END-->

                            <!-- Revisions -->
                            <div class="collapse js-revisions-panel">
                                <div class="h-5 font-weight-bold mr-1 title">
                                    {% trans %}editor.revisions.title{% endtrans %}
                                </div>
                                <div class="js-revisions"
                                     data-loading="{% trans %}editor.revisions.loading{% endtrans %}"
                                >
                                </div>
                            </div>
                            <!-- Revisions END-->

                        </div>

                        <!-- Translate textarea -->
                        <div class="col-6 h-100 align-self-end translation-area">

                            <div class="d-flex flex-wrap mb-1 translation-stat">
                                <div class="h-5 font-weight-bold mr-1 title">
                                    <div class="js-roles btn-group btn-group-extra-sm ml-auto mr-1 js-role role"
                                         role="group"
                                         aria-label="{% trans %}editor.working.role.title{% endtrans %}"
                                    >
                                        <button type="button"
                                                class="btn btn-outline-secondary js-trans trans active"
                                                data-role="translator"
                                        >
                                            {% trans %}editor.working.role.translate{% endtrans %}
                                        </button>
                                        <button type="button"
                                                class="btn btn-outline-secondary js-proof proof"
                                                data-role="proofreader"
                                        >
                                            {% trans %}editor.working.role.proofread{% endtrans %}
                                        </button>
                                        <button type="button"
                                                class="btn btn-outline-secondary js-rev rev"
                                                data-role="reviewer"
                                        >
                                            {% trans %}editor.working.role.review{% endtrans %}
                                        </button>
                                    </div>
                                </div>
                                <div class="ml-auto toolset">
                                    <a class="transfer"
                                       data-toggle="collapse"
                                       data-target="#stats_bars"
                                       aria-expanded="false"
                                       aria-controls="stats_bars"
                                    >
                                        <svg viewBox="0 0 20 20" class="svg-text_left-dims">
                                            <use xlink:href="#text_left"></use>
                                        </svg>
                                    </a>
                                </div>
                            </div>

                            <div class="d-flex flex-wrap">
                                <form class="w-100 translation-area__form">
                                    <div class="form-group">
                                        <textarea class="form-control mb-2 noresize js-translation-area" rows="5">
                                        </textarea>

                                        <div class="d-flex form-group">
                                            <button type="button"
                                                    class="js-show-comments btn btn-outline-secondary btn-sm mr-1"
                                            >
                                                {% trans %}editor.comments.button{% endtrans %}
                                                <span class="pl-1 badge badge-pill badge-secondary js-comments-count"></span>
                                            </button>

                                            <button type="button"
                                                    class="js-show-review btn btn-outline-secondary btn-sm mr-1"
                                            >
                                                {% trans %}editor.revisions.button{% endtrans %}
                                                <span class="pl-1 badge badge-pill badge-primary js-revisions-count"></span>
                                            </button>

                                            <div id="translation_nav"
                                                 class="btn-group btn-group-sm ml-auto mr-1"
                                                 role="group"
                                                 aria-label="{% trans %}editor.navigation.title{% endtrans %}"
                                            >
                                                <button type="button"
                                                        class="btn btn-outline-secondary js-prev-translation">
                                                    &lt;&lt;
                                                </button>
                                                <button type="button"
                                                        class="btn btn-outline-secondary js-next-translation">
                                                    &gt;&gt;
                                                </button>
                                            </div>

                                            <button type="button"
                                                    class="btn btn-primary btn-sm js-save-translation"
                                                    data-save-role="trans"
                                            >
                                                {% trans %}editor.working.role.translate_save{% endtrans %}
                                            </button>
                                            <button type="button"
                                                    class="btn btn-primary btn-sm js-save-translation"
                                                    data-save-role="proof"
                                            >
                                                {% trans %}editor.working.role.proofread_save{% endtrans %}
                                            </button>
                                            <button type="button"
                                                    class="btn btn-primary btn-sm js-save-translation"
                                                    data-save-role="rev"
                                            >
                                                {% trans %}editor.working.role.review_save{% endtrans %}
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>

                        </div>
                        <!-- Translate textarea END-->
                    </div>
                </div>
            </div>
            <!-- Dashboard END -->

            <!-- Stats -->
            <div class="row">
                <div class="col-9">
                    <div id="stats_bars" class="position-fixed statistic-window collapse">
                        <div class="statistic-container">
                            <button type="button"
                                    class="btn-close"
                                    aria-label="Close"
                                    data-toggle="collapse"
                                    data-target="#stats_bars"
                                    aria-expanded="false"
                                    aria-controls="stats_bars"
                            >
                                <span aria-hidden="true">&times;</span>
                            </button>

                            <div class="h-5 font-weight-bold text-center mr-1 title">
                                {% trans %}editor.working.stats.title{% endtrans %}
                            </div>

                            <div class="stat__item">
                                <span class="stat-label">{% trans %}editor.working.stats.translated{% endtrans %}</span>
                                <div class="progress">
                                    <div class="progress-bar progress-bar_saved"
                                         role="progressbar"
                                         style="width: 75%"
                                         aria-valuenow="75"
                                         aria-valuemin="0"
                                         aria-valuemax="100"
                                    ></div>
                                </div>
                                <span class="stat-value">75%</span>
                            </div>

                            <div class="stat__item">
                                <span class="stat-label">{% trans %}editor.working.stats.proofread{% endtrans %}</span>
                                <div class="progress">
                                    <div class="progress-bar progress-bar_proofreaded"
                                         role="progressbar"
                                         style="width: 55%"
                                         aria-valuenow="55"
                                         aria-valuemin="0"
                                         aria-valuemax="100"
                                    ></div>
                                </div>
                                <span class="stat-value">55%</span>
                            </div>

                            <div class="stat__item">
                                <span class="stat-label">{% trans %}editor.working.stats.reviewed{% endtrans %}</span>
                                <div class="progress">
                                    <div class="progress-bar progress-bar_reviwed"
                                         role="progressbar"
                                         style="width: 25%"
                                         aria-valuenow="25"
                                         aria-valuemin="0"
                                         aria-valuemax="100"
                                    ></div>
                                </div>
                                <span class="stat-value">25%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Stats END -->

        </div>
    </div>

    <div class="modal fade"
         id="changedTranslationModal"
         tabindex="-1"
         role="dialog"
         aria-labelledby="changedTranslationModalTitle"
         aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="changedTranslationModalTitle">
                {% trans %}editor.working.changed.title{% endtrans %}
            </h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
              {% trans %}editor.working.changed.body{% endtrans %}
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">
                {% trans %}editor.working.changed.button.cancel{% endtrans %}
            </button>
            <button type="button" class="btn btn-primary" data-action="undoContinue">
                {% trans %}editor.working.changed.button.dismiss{% endtrans %}
            </button>
              <button type="button" class="btn btn-primary" data-action="saveContinue">
                  {% trans %}editor.working.changed.button.save{% endtrans %}
              </button>
          </div>
        </div>
      </div>
    </div>
</main>
{% endblock %}